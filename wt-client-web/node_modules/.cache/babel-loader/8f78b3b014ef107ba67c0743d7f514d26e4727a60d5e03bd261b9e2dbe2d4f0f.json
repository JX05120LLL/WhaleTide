{"ast":null,"code":"function _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n/* eslint-disable */\nimport axios from 'axios';\nimport { ElMessage } from 'element-plus';\nimport router from '@/router';\n\n// 创建axios实例\nvar service = axios.create({\n  baseURL: process.env.VUE_APP_API_URL || 'http://localhost:8080/api',\n  // 后端API基础URL\n  timeout: 15000,\n  // 请求超时时间\n  withCredentials: true,\n  // 允许跨域携带cookie\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// 请求拦截器\nservice.interceptors.request.use(function (config) {\n  // 从本地存储获取token并添加到请求头\n  var token = localStorage.getItem('token');\n  if (token) {\n    config.headers['Authorization'] = \"Bearer \".concat(token);\n  }\n  return config;\n}, function (error) {\n  console.error('请求错误: ', error);\n  return Promise.reject(error);\n});\n\n// 响应拦截器\nservice.interceptors.response.use(function (response) {\n  var res = response.data;\n\n  // 根据后端返回的状态码判断请求是否成功\n  if (res.code && res.code !== 200) {\n    ElMessage({\n      message: res.message || '请求失败',\n      type: 'error',\n      duration: 3000\n    });\n\n    // 处理特定错误码\n    if (res.code === 401) {\n      // 未登录或者token过期\n      localStorage.removeItem('token');\n      localStorage.removeItem('user');\n      router.push('/login');\n    }\n    return Promise.reject(new Error(res.message || '请求失败'));\n  } else {\n    return res;\n  }\n}, function (error) {\n  console.error('响应错误: ', error);\n  var message = '网络错误，请稍后重试';\n  if (error.response) {\n    switch (error.response.status) {\n      case 401:\n        message = '未授权，请重新登录';\n        localStorage.removeItem('token');\n        localStorage.removeItem('user');\n        router.push('/login');\n        break;\n      case 403:\n        message = '拒绝访问';\n        break;\n      case 404:\n        message = '请求的资源不存在';\n        break;\n      case 500:\n        message = '服务器错误';\n        break;\n      default:\n        message = error.response.data.message || \"\\u8BF7\\u6C42\\u5931\\u8D25: \".concat(error.response.status);\n    }\n  }\n  ElMessage({\n    message: message,\n    type: 'error',\n    duration: 3000\n  });\n  return Promise.reject(error);\n});\n\n// 封装请求方法\nexport var http = {\n  get: function get(url, params) {\n    var config = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    return service.get(url, _objectSpread({\n      params: params\n    }, config));\n  },\n  post: function post(url, data) {\n    var config = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    return service.post(url, data, config);\n  },\n  put: function put(url, data) {\n    var config = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    return service.put(url, data, config);\n  },\n  \"delete\": function _delete(url, params) {\n    var config = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    return service[\"delete\"](url, _objectSpread({\n      params: params\n    }, config));\n  }\n};\nexport default service;","map":{"version":3,"names":["axios","ElMessage","router","service","create","baseURL","process","env","VUE_APP_API_URL","timeout","withCredentials","headers","interceptors","request","use","config","token","localStorage","getItem","concat","error","console","Promise","reject","response","res","data","code","message","type","duration","removeItem","push","Error","status","http","get","url","params","arguments","length","undefined","_objectSpread","post","put","delete"],"sources":["D:/code/project/WhaleTide-1/WhaleTide/wt-client-web/src/utils/request.js"],"sourcesContent":["/* eslint-disable */\r\nimport axios from 'axios'\r\nimport { ElMessage } from 'element-plus'\r\nimport router from '@/router'\r\n\r\n// 创建axios实例\r\nconst service = axios.create({\r\n  baseURL: process.env.VUE_APP_API_URL || 'http://localhost:8080/api', // 后端API基础URL\r\n  timeout: 15000, // 请求超时时间\r\n  withCredentials: true, // 允许跨域携带cookie\r\n  headers: {\r\n    'Content-Type': 'application/json'\r\n  }\r\n})\r\n\r\n// 请求拦截器\r\nservice.interceptors.request.use(\r\n  config => {\r\n    // 从本地存储获取token并添加到请求头\r\n    const token = localStorage.getItem('token')\r\n    if (token) {\r\n      config.headers['Authorization'] = `Bearer ${token}`\r\n    }\r\n    return config\r\n  },\r\n  error => {\r\n    console.error('请求错误: ', error)\r\n    return Promise.reject(error)\r\n  }\r\n)\r\n\r\n// 响应拦截器\r\nservice.interceptors.response.use(\r\n  response => {\r\n    const res = response.data\r\n    \r\n    // 根据后端返回的状态码判断请求是否成功\r\n    if (res.code && res.code !== 200) {\r\n      ElMessage({\r\n        message: res.message || '请求失败',\r\n        type: 'error',\r\n        duration: 3000\r\n      })\r\n      \r\n      // 处理特定错误码\r\n      if (res.code === 401) {\r\n        // 未登录或者token过期\r\n        localStorage.removeItem('token')\r\n        localStorage.removeItem('user')\r\n        router.push('/login')\r\n      }\r\n      \r\n      return Promise.reject(new Error(res.message || '请求失败'))\r\n    } else {\r\n      return res\r\n    }\r\n  },\r\n  error => {\r\n    console.error('响应错误: ', error)\r\n    let message = '网络错误，请稍后重试'\r\n    \r\n    if (error.response) {\r\n      switch (error.response.status) {\r\n        case 401:\r\n          message = '未授权，请重新登录'\r\n          localStorage.removeItem('token')\r\n          localStorage.removeItem('user')\r\n          router.push('/login')\r\n          break\r\n        case 403:\r\n          message = '拒绝访问'\r\n          break\r\n        case 404:\r\n          message = '请求的资源不存在'\r\n          break\r\n        case 500:\r\n          message = '服务器错误'\r\n          break\r\n        default:\r\n          message = error.response.data.message || `请求失败: ${error.response.status}`\r\n      }\r\n    }\r\n    \r\n    ElMessage({\r\n      message: message,\r\n      type: 'error',\r\n      duration: 3000\r\n    })\r\n    \r\n    return Promise.reject(error)\r\n  }\r\n)\r\n\r\n// 封装请求方法\r\nexport const http = {\r\n  get(url, params, config = {}) {\r\n    return service.get(url, { params, ...config })\r\n  },\r\n  post(url, data, config = {}) {\r\n    return service.post(url, data, config)\r\n  },\r\n  put(url, data, config = {}) {\r\n    return service.put(url, data, config)\r\n  },\r\n  delete(url, params, config = {}) {\r\n    return service.delete(url, { params, ...config })\r\n  }\r\n}\r\n\r\nexport default service "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}