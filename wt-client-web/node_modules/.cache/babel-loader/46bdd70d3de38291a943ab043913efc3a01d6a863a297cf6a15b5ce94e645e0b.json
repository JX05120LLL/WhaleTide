{"ast":null,"code":"import { http } from '@/utils/request';\n\n/**\n * 直接购买商品\n * @param {Object} data - 直接购买商品数据\n * @param {number} data.productId - 商品ID\n * @param {number} data.quantity - 商品数量\n * @param {number} data.userId - 用户ID (可选，从store获取)\n * @returns {Promise} 返回临时购物项ID\n */\nexport var directBuy = function directBuy(data) {\n  console.log('调用directBuy API，参数:', data);\n\n  // 从localStorage获取userId，确保API调用带上用户ID\n  var userInfo = JSON.parse(localStorage.getItem('user') || '{}');\n  if (userInfo && userInfo.id && !data.userId) {\n    data.userId = userInfo.id;\n    console.log('从localStorage添加userId:', data.userId);\n  }\n  return http.post('/order/directBuy', data).then(function (response) {\n    console.log('directBuy API响应:', response);\n    return response;\n  })[\"catch\"](function (error) {\n    console.error('directBuy API错误:', error);\n    throw error;\n  });\n};\n\n/**\n * 生成确认订单\n * @param {Object} data - 确认订单数据\n * @param {Array} data.cartItemIds - 购物车项ID列表\n * @returns {Promise} 返回确认订单数据\n */\nexport var generateConfirmOrder = function generateConfirmOrder(data) {\n  return http.post('/order/generateConfirmOrder', data);\n};\n\n/**\n * 提交订单\n * @param {Object} data - 提交订单数据\n * @param {Array} data.cartItemIds - 购物车项ID列表\n * @param {number} data.addressId - 收货地址ID\n * @param {string} data.payType - 支付方式\n * @param {string} data.note - 订单备注\n * @returns {Promise} 返回生成的订单数据\n */\nexport var generateOrder = function generateOrder(data) {\n  return http.post('/order/generateOrder', data);\n};\n\n/**\n * 支付成功回调\n * @param {Object} data - 支付成功数据\n * @param {number} data.orderId - 订单ID\n * @param {number} data.payType - 支付方式：1-支付宝；2-微信支付；3-银联支付\n * @returns {Promise} 返回支付结果\n */\nexport var paySuccess = function paySuccess(data) {\n  return http.post('/order/paySuccess', data);\n};\n\n/**\n * 获取订单列表\n * @param {Object} params - 查询参数\n * @param {number} params.pageNum - 页码\n * @param {number} params.pageSize - 每页数量\n * @param {number} params.status - 订单状态\n * @returns {Promise} 返回订单列表\n */\nexport var getOrderList = function getOrderList(params) {\n  return http.get('/order/list', {\n    params: params\n  });\n};\n\n/**\n * 获取订单详情\n * @param {number|string} orderId - 订单ID\n * @returns {Promise} 返回订单详情\n */\nexport var getOrderDetail = function getOrderDetail(orderId) {\n  return http.get(\"/order/detail/\".concat(orderId));\n};\n\n/**\n * 取消订单\n * @param {Object} data - 取消订单数据\n * @param {number|string} data.orderId - 订单ID\n * @returns {Promise} 返回取消结果\n */\nexport var cancelOrder = function cancelOrder(data) {\n  return http.post('/order/cancel', data);\n};\n\n/**\n * 确认收货\n * @param {Object} data - 确认收货数据\n * @param {number|string} data.orderId - 订单ID\n * @returns {Promise} 返回确认结果\n */\nexport var confirmReceiveOrder = function confirmReceiveOrder(data) {\n  return http.post('/order/confirmReceive', data);\n};\n\n/**\n * 删除订单\n * @param {Object} data - 删除订单数据\n * @param {number|string} data.orderId - 订单ID\n * @returns {Promise} 返回删除结果\n */\nexport var deleteOrder = function deleteOrder(data) {\n  return http.post('/order/delete', data);\n};\n\n/**\n * 创建订单\n * @param {Object} orderData - 订单数据\n * @param {Array} orderData.items - 商品列表\n * @param {Object} orderData.address - 收货地址\n * @param {string} orderData.paymentMethod - 支付方式\n * @param {string} orderData.couponCode - 优惠券代码\n * @returns {Promise} 返回创建的订单信息\n */\nexport var createOrder = function createOrder(orderData) {\n  return http.post('/orders', orderData);\n};\n\n/**\n * 申请退款\n * @param {number|string} orderId - 订单ID\n * @param {Object} refundData - 退款数据\n * @param {string} refundData.reason - 退款原因\n * @param {string} refundData.description - 问题描述\n * @param {Array} refundData.images - 图片证据\n * @returns {Promise} 返回申请结果\n */\nexport var applyRefund = function applyRefund(orderId, refundData) {\n  return http.post(\"/orders/\".concat(orderId, \"/refund\"), refundData);\n};\n\n/**\n * 获取订单物流信息\n * @param {number|string} orderId - 订单ID\n * @returns {Promise} 返回物流信息\n */\nexport var getOrderTracking = function getOrderTracking(orderId) {\n  return http.get(\"/orders/\".concat(orderId, \"/tracking\"));\n};\n\n/**\n * 延长收货时间\n * @param {number|string} orderId - 订单ID\n * @param {number} days - 延长天数\n * @returns {Promise} 返回延长结果\n */\nexport var extendReceivingTime = function extendReceivingTime(orderId, days) {\n  return http.put(\"/orders/\".concat(orderId, \"/extend-receiving\"), {\n    days: days\n  });\n};\n\n/**\n * 获取可用于结算的地址列表\n * @returns {Promise} 返回地址列表\n */\nexport var getCheckoutAddresses = function getCheckoutAddresses() {\n  return http.get('/user/addresses');\n};\n\n/**\n * 获取可用优惠券\n * @returns {Promise} 返回优惠券列表\n */\nexport var getAvailableCoupons = function getAvailableCoupons() {\n  return http.get('/user/coupons/available');\n};","map":{"version":3,"names":["http","directBuy","data","console","log","userInfo","JSON","parse","localStorage","getItem","id","userId","post","then","response","error","generateConfirmOrder","generateOrder","paySuccess","getOrderList","params","get","getOrderDetail","orderId","concat","cancelOrder","confirmReceiveOrder","deleteOrder","createOrder","orderData","applyRefund","refundData","getOrderTracking","extendReceivingTime","days","put","getCheckoutAddresses","getAvailableCoupons"],"sources":["D:/code/project/WhaleTide-1/WhaleTide/wt-client-web/src/api/order.js"],"sourcesContent":["import { http } from '@/utils/request';\n\n/**\n * 直接购买商品\n * @param {Object} data - 直接购买商品数据\n * @param {number} data.productId - 商品ID\n * @param {number} data.quantity - 商品数量\n * @param {number} data.userId - 用户ID (可选，从store获取)\n * @returns {Promise} 返回临时购物项ID\n */\nexport const directBuy = (data) => {\n  console.log('调用directBuy API，参数:', data);\n  \n  // 从localStorage获取userId，确保API调用带上用户ID\n  const userInfo = JSON.parse(localStorage.getItem('user') || '{}');\n  if (userInfo && userInfo.id && !data.userId) {\n    data.userId = userInfo.id;\n    console.log('从localStorage添加userId:', data.userId);\n  }\n  \n  return http.post('/order/directBuy', data)\n    .then(response => {\n      console.log('directBuy API响应:', response);\n      return response;\n    })\n    .catch(error => {\n      console.error('directBuy API错误:', error);\n      throw error;\n    });\n};\n\n/**\n * 生成确认订单\n * @param {Object} data - 确认订单数据\n * @param {Array} data.cartItemIds - 购物车项ID列表\n * @returns {Promise} 返回确认订单数据\n */\nexport const generateConfirmOrder = (data) => {\n  return http.post('/order/generateConfirmOrder', data);\n};\n\n/**\n * 提交订单\n * @param {Object} data - 提交订单数据\n * @param {Array} data.cartItemIds - 购物车项ID列表\n * @param {number} data.addressId - 收货地址ID\n * @param {string} data.payType - 支付方式\n * @param {string} data.note - 订单备注\n * @returns {Promise} 返回生成的订单数据\n */\nexport const generateOrder = (data) => {\n  return http.post('/order/generateOrder', data);\n};\n\n/**\n * 支付成功回调\n * @param {Object} data - 支付成功数据\n * @param {number} data.orderId - 订单ID\n * @param {number} data.payType - 支付方式：1-支付宝；2-微信支付；3-银联支付\n * @returns {Promise} 返回支付结果\n */\nexport const paySuccess = (data) => {\n  return http.post('/order/paySuccess', data);\n};\n\n/**\n * 获取订单列表\n * @param {Object} params - 查询参数\n * @param {number} params.pageNum - 页码\n * @param {number} params.pageSize - 每页数量\n * @param {number} params.status - 订单状态\n * @returns {Promise} 返回订单列表\n */\nexport const getOrderList = (params) => {\n  return http.get('/order/list', { params });\n};\n\n/**\n * 获取订单详情\n * @param {number|string} orderId - 订单ID\n * @returns {Promise} 返回订单详情\n */\nexport const getOrderDetail = (orderId) => {\n  return http.get(`/order/detail/${orderId}`);\n};\n\n/**\n * 取消订单\n * @param {Object} data - 取消订单数据\n * @param {number|string} data.orderId - 订单ID\n * @returns {Promise} 返回取消结果\n */\nexport const cancelOrder = (data) => {\n  return http.post('/order/cancel', data);\n};\n\n/**\n * 确认收货\n * @param {Object} data - 确认收货数据\n * @param {number|string} data.orderId - 订单ID\n * @returns {Promise} 返回确认结果\n */\nexport const confirmReceiveOrder = (data) => {\n  return http.post('/order/confirmReceive', data);\n};\n\n/**\n * 删除订单\n * @param {Object} data - 删除订单数据\n * @param {number|string} data.orderId - 订单ID\n * @returns {Promise} 返回删除结果\n */\nexport const deleteOrder = (data) => {\n  return http.post('/order/delete', data);\n};\n\n/**\n * 创建订单\n * @param {Object} orderData - 订单数据\n * @param {Array} orderData.items - 商品列表\n * @param {Object} orderData.address - 收货地址\n * @param {string} orderData.paymentMethod - 支付方式\n * @param {string} orderData.couponCode - 优惠券代码\n * @returns {Promise} 返回创建的订单信息\n */\nexport const createOrder = (orderData) => {\n  return http.post('/orders', orderData);\n};\n\n/**\n * 申请退款\n * @param {number|string} orderId - 订单ID\n * @param {Object} refundData - 退款数据\n * @param {string} refundData.reason - 退款原因\n * @param {string} refundData.description - 问题描述\n * @param {Array} refundData.images - 图片证据\n * @returns {Promise} 返回申请结果\n */\nexport const applyRefund = (orderId, refundData) => {\n  return http.post(`/orders/${orderId}/refund`, refundData);\n};\n\n/**\n * 获取订单物流信息\n * @param {number|string} orderId - 订单ID\n * @returns {Promise} 返回物流信息\n */\nexport const getOrderTracking = (orderId) => {\n  return http.get(`/orders/${orderId}/tracking`);\n};\n\n/**\n * 延长收货时间\n * @param {number|string} orderId - 订单ID\n * @param {number} days - 延长天数\n * @returns {Promise} 返回延长结果\n */\nexport const extendReceivingTime = (orderId, days) => {\n  return http.put(`/orders/${orderId}/extend-receiving`, { days });\n};\n\n/**\n * 获取可用于结算的地址列表\n * @returns {Promise} 返回地址列表\n */\nexport const getCheckoutAddresses = () => {\n  return http.get('/user/addresses');\n};\n\n/**\n * 获取可用优惠券\n * @returns {Promise} 返回优惠券列表\n */\nexport const getAvailableCoupons = () => {\n  return http.get('/user/coupons/available');\n}; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}