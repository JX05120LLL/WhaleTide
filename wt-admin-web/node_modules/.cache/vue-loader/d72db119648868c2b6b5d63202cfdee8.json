{"remainingRequest":"D:\\code\\project\\WhaleTide-1\\WhaleTide\\wt-admin-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\code\\project\\WhaleTide-1\\WhaleTide\\wt-admin-web\\src\\views\\Dashboard.vue?vue&type=style&index=0&id=22ba47ca&lang=scss&scoped=true","dependencies":[{"path":"D:\\code\\project\\WhaleTide-1\\WhaleTide\\wt-admin-web\\src\\views\\Dashboard.vue","mtime":1747272070000},{"path":"D:\\code\\project\\WhaleTide-1\\WhaleTide\\wt-admin-web\\node_modules\\css-loader\\dist\\cjs.js","mtime":1747114802000},{"path":"D:\\code\\project\\WhaleTide-1\\WhaleTide\\wt-admin-web\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1747114804000},{"path":"D:\\code\\project\\WhaleTide-1\\WhaleTide\\wt-admin-web\\node_modules\\postcss-loader\\src\\index.js","mtime":1747114802000},{"path":"D:\\code\\project\\WhaleTide-1\\WhaleTide\\wt-admin-web\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1747114802000},{"path":"D:\\code\\project\\WhaleTide-1\\WhaleTide\\wt-admin-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1747114802000},{"path":"D:\\code\\project\\WhaleTide-1\\WhaleTide\\wt-admin-web\\node_modules\\vue-loader\\lib\\index.js","mtime":1747114802000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5kYXNoYm9hcmQtY29udGFpbmVyIHsKICBwYWRkaW5nOiAyMHB4IDIwcHggMjBweCA0MHB4OyAvKiDlop7liqDlt6bkvqflhoXovrnot50gKi8KICBtYXJnaW46IDAgMCAwIDIwMHB4OyAvKiDmt7vliqDlt6bkvqflpJbovrnot53vvIzpgb/lvIDkvqfovrnmoI8gKi8KICAKICAuZGF0YS1jYXJkcy1yb3cgewogICAgZGlzcGxheTogZmxleDsKICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgZmxleC13cmFwOiB3cmFwOwogIH0KCiAgLmNhcmQtaGVhZGVyIHsKICAgIGRpc3BsYXk6IGZsZXg7CiAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgZm9udC13ZWlnaHQ6IGJvbGQ7CiAgICBmb250LXNpemU6IDE2cHg7CiAgfQoKICAuZGF0YS1jYXJkIHsKICAgIGhlaWdodDogMTYwcHg7CiAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICBvdmVyZmxvdzogaGlkZGVuOwogICAgdHJhbnNpdGlvbjogYWxsIDAuM3M7CiAgICBib3JkZXItcmFkaXVzOiA4cHg7CiAgICBib3JkZXI6IG5vbmU7CiAgICAKICAgICY6aG92ZXIgewogICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTVweCk7CiAgICAgIGJveC1zaGFkb3c6IDAgMTBweCAyMHB4IHJnYmEoMCwgMCwgMCwgMC4xKTsKICAgIH0KCiAgICAuY2FyZC1jb250ZW50IHsKICAgICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgICBoZWlnaHQ6IDEwMHB4OwogICAgICBkaXNwbGF5OiBmbGV4OwogICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICAgIH0KICAgIAogICAgLmNhcmQtcGFuZWwtbnVtIHsKICAgICAgZm9udC1zaXplOiAyOHB4OwogICAgICBmb250LXdlaWdodDogYm9sZDsKICAgICAgbWFyZ2luLXRvcDogMTBweDsKICAgICAgei1pbmRleDogMjsKICAgICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgfQogICAgCiAgICAuY2FyZC1wYW5lbC1pY29uIHsKICAgICAgcG9zaXRpb246IGFic29sdXRlOwogICAgICByaWdodDogMTVweDsKICAgICAgYm90dG9tOiAxMHB4OwogICAgICBmb250LXNpemU6IDQ1cHg7CiAgICAgIG9wYWNpdHk6IDAuMjsKICAgICAgei1pbmRleDogMTsKICAgIH0KCiAgICAmLmFjdGl2aXR5LWNhcmQgewogICAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQodG8gcmlnaHQsICNmNDZiNDUsICNlZWE4NDkpOwogICAgICBjb2xvcjogd2hpdGU7CiAgICAgIAogICAgICAuZWwtY2FyZF9faGVhZGVyIHsKICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMSk7CiAgICAgICAgY29sb3I6IHdoaXRlOwogICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCByZ2JhKDI1NSwgMjU1LCAyNTUsIDAuMik7CiAgICAgIH0KICAgIH0KCiAgICAmLnVzZXItY2FyZCB7CiAgICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCh0byByaWdodCwgIzM2ZDFkYywgIzViODZlNSk7CiAgICAgIGNvbG9yOiB3aGl0ZTsKICAgICAgCiAgICAgIC5lbC1jYXJkX19oZWFkZXIgewogICAgICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xKTsKICAgICAgICBjb2xvcjogd2hpdGU7CiAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4yKTsKICAgICAgfQogICAgfQogICAgCiAgICAmLm1lc3NhZ2UtY2FyZCB7CiAgICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCh0byByaWdodCwgI2ZmNWY2ZCwgI2ZmYzM3MSk7CiAgICAgIGNvbG9yOiB3aGl0ZTsKICAgICAgCiAgICAgIC5lbC1jYXJkX19oZWFkZXIgewogICAgICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xKTsKICAgICAgICBjb2xvcjogd2hpdGU7CiAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4yKTsKICAgICAgfQogICAgfQogICAgCiAgICAmLnByb2R1Y3QtY2FyZCB7CiAgICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCh0byByaWdodCwgIzExOTk4ZSwgIzM4ZWY3ZCk7CiAgICAgIGNvbG9yOiB3aGl0ZTsKICAgICAgCiAgICAgIC5lbC1jYXJkX19oZWFkZXIgewogICAgICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xKTsKICAgICAgICBjb2xvcjogd2hpdGU7CiAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4yKTsKICAgICAgfQogICAgfQogICAgCiAgICAmLnJvbGUtY2FyZCB7CiAgICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCh0byByaWdodCwgIzgzNGQ5YiwgI2QwNGVkNik7CiAgICAgIGNvbG9yOiB3aGl0ZTsKICAgICAgCiAgICAgIC5lbC1jYXJkX19oZWFkZXIgewogICAgICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xKTsKICAgICAgICBjb2xvcjogd2hpdGU7CiAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4yKTsKICAgICAgfQogICAgfQogIH0KICAKICAuaW5mby1jYXJkIHsKICAgIG1hcmdpbi1ib3R0b206IDIwcHg7CiAgICAKICAgIC5lbXB0eS1kYXRhIHsKICAgICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgICBjb2xvcjogIzkwOTM5OTsKICAgICAgcGFkZGluZzogMzBweCAwOwogICAgICBmb250LXNpemU6IDE0cHg7CiAgICB9CiAgICAKICAgIC5hbm5vdW5jZW1lbnQtY2FyZCB7CiAgICAgIG1hcmdpbi1ib3R0b206IDEwcHg7CiAgICAgIAogICAgICAuYW5ub3VuY2VtZW50LXRpdGxlIHsKICAgICAgICBtYXJnaW46IDAgMCAxMHB4OwogICAgICAgIGZvbnQtc2l6ZTogMTZweDsKICAgICAgfQogICAgICAKICAgICAgLmFubm91bmNlbWVudC1jb250ZW50IHsKICAgICAgICBtYXJnaW46IDA7CiAgICAgICAgY29sb3I6ICM2MDYyNjY7CiAgICAgICAgZm9udC1zaXplOiAxNHB4OwogICAgICB9CiAgICB9CiAgfQogIAogIC5ub3RpY2UtdGltZWxpbmUgewogICAgcGFkZGluZy10b3A6IDEwcHg7CiAgfQogIAogIC53YXJuaW5nLXJvdyB7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI1NSwgMjM2LCAyMDQsIDAuMyk7CiAgfQogIAogIC5zdWNjZXNzLXJvdyB7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDIyNywgMjU1LCAyMzMsIDAuMyk7CiAgfQp9Cg=="},{"version":3,"sources":["Dashboard.vue"],"names":[],"mappings":";AAyOA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"Dashboard.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"dashboard-container\">\n    <el-row type=\"flex\" justify=\"center\" :gutter=\"20\" class=\"data-cards-row\">\n      <el-col :span=\"4\" :xs=\"12\" :sm=\"8\" :md=\"6\" :lg=\"4\">\n        <el-card shadow=\"hover\" class=\"data-card user-card\" :body-style=\"{ padding: '20px' }\">\n          <div slot=\"header\" class=\"card-header\">\n            <span>用户总数</span>\n          </div>\n          <div class=\"card-content\">\n            <div class=\"card-panel-num\">{{ stats.userCount || 0 }}</div>\n            <div class=\"card-panel-icon\">\n              <i class=\"el-icon-user\"></i>\n            </div>\n          </div>\n        </el-card>\n      </el-col>\n      <el-col :span=\"4\" :xs=\"12\" :sm=\"8\" :md=\"6\" :lg=\"4\">\n        <el-card shadow=\"hover\" class=\"data-card message-card\" :body-style=\"{ padding: '20px' }\">\n          <div slot=\"header\" class=\"card-header\">\n            <span>留言总数</span>\n          </div>\n          <div class=\"card-content\">\n            <div class=\"card-panel-num\">{{ stats.messageCount || 0 }}</div>\n            <div class=\"card-panel-icon\">\n              <i class=\"el-icon-chat-line-square\"></i>\n            </div>\n          </div>\n        </el-card>\n      </el-col>\n      <el-col :span=\"4\" :xs=\"12\" :sm=\"8\" :md=\"6\" :lg=\"4\">\n        <el-card shadow=\"hover\" class=\"data-card product-card\" :body-style=\"{ padding: '20px' }\">\n          <div slot=\"header\" class=\"card-header\">\n            <span>商品总数</span>\n          </div>\n          <div class=\"card-content\">\n            <div class=\"card-panel-num\">{{ stats.productCount || 0 }}</div>\n            <div class=\"card-panel-icon\">\n              <i class=\"el-icon-goods\"></i>\n            </div>\n          </div>\n        </el-card>\n      </el-col>\n    </el-row>\n\n    <el-row :gutter=\"20\" style=\"margin-top: 20px;\">\n      <el-col :span=\"12\">\n        <el-card shadow=\"hover\" class=\"info-card notice-card\" :body-style=\"{ padding: '15px 20px' }\">\n          <div slot=\"header\" class=\"card-header\">\n            <span>系统公告</span>\n          </div>\n          <div v-if=\"announcements.length === 0\" class=\"empty-data\">暂无公告</div>\n          <el-timeline v-else class=\"notice-timeline\">\n            <el-timeline-item\n              v-for=\"(announcement, index) in announcements\"\n              :key=\"index\"\n              :timestamp=\"announcement.time\"\n              placement=\"top\"\n              type=\"primary\"\n            >\n              <el-card class=\"announcement-card\">\n                <h4 class=\"announcement-title\">{{ announcement.title }}</h4>\n                <p class=\"announcement-content\">{{ announcement.content }}</p>\n              </el-card>\n            </el-timeline-item>\n          </el-timeline>\n        </el-card>\n      </el-col>\n      <el-col :span=\"12\">\n        <el-card shadow=\"hover\" class=\"info-card\" :body-style=\"{ padding: '15px 20px' }\">\n          <div slot=\"header\" class=\"card-header\">\n            <span>待办事项</span>\n          </div>\n          <div v-if=\"todos.length === 0\" class=\"empty-data\">暂无待办事项</div>\n          <el-table v-else :data=\"todos\" style=\"width: 100%\" :row-class-name=\"tableRowClassName\">\n            <el-table-column prop=\"content\" label=\"内容\"></el-table-column>\n            <el-table-column prop=\"date\" label=\"时间\" width=\"180\"></el-table-column>\n            <el-table-column prop=\"status\" label=\"状态\" width=\"100\">\n              <template slot-scope=\"scope\">\n                <el-tag :type=\"scope.row.status === '已完成' ? 'success' : 'warning'\">\n                  {{ scope.row.status }}\n                </el-tag>\n              </template>\n            </el-table-column>\n          </el-table>\n        </el-card>\n      </el-col>\n    </el-row>\n  </div>\n</template>\n\n<script>\nimport { getDashboardData } from '@/api/dashboard'\n\nexport default {\n  name: 'Dashboard',\n  data() {\n    return {\n      stats: {\n        userCount: 0,\n        messageCount: 0,\n        productCount: 0\n      },\n      announcements: [],\n      todos: []\n    }\n  },\n  created() {\n    this.fetchData()\n  },\n  methods: {\n    fetchData() {\n      console.log('开始获取仪表盘数据');\n      \n      // 开发环境也尝试请求后端数据，便于测试\n      const useDefaultDataInDev = true; // 设为false表示开发环境也请求后端数据\n      \n      if (process.env.NODE_ENV === 'development' && useDefaultDataInDev) {\n        console.log('开发环境使用模拟数据');\n        setTimeout(() => {\n          this.useDefaultData();\n        }, 500);\n        return;\n      }\n      \n      // 显示加载提示\n      this.$notify({\n        title: '正在加载',\n        message: '正在从后端加载仪表盘数据',\n        type: 'info',\n        duration: 2000\n      });\n      \n      getDashboardData()\n        .then(response => {\n          console.log('仪表盘数据获取成功:', response);\n          const { data } = response;\n          \n          if (data) {\n            this.stats = data.stats || this.stats;\n            this.announcements = data.announcements || [];\n            this.todos = data.todos || [];\n            \n            this.$notify({\n              title: '加载成功',\n              message: '仪表盘数据加载成功',\n              type: 'success',\n              duration: 2000\n            });\n          } else {\n            console.warn('API响应缺少data字段:', response);\n            this.useDefaultData();\n          }\n        })\n        .catch(error => {\n          console.error('获取仪表盘数据失败:', error);\n          \n          // 错误详情记录\n          if (error.response) {\n            // 请求成功发出且服务器响应了状态码，但状态码超出了2xx的范围\n            console.log('错误状态码:', error.response.status);\n            console.log('错误响应数据:', error.response.data);\n            \n            // 如果是401错误，尝试重新获取一次，可能是token问题\n            if (error.response.status === 401) {\n              console.log('未授权，尝试重新获取仪表盘数据');\n              // 一秒后重试\n              setTimeout(() => {\n                getDashboardData().catch(retryError => {\n                  console.log('重试失败:', retryError);\n                  this.useDefaultData();\n                  this.$notify.error({\n                    title: '重试失败',\n                    message: '身份验证失败，使用默认数据'\n                  });\n                });\n              }, 1000);\n              return;\n            }\n          } else if (error.request) {\n            // 请求已经成功发起，但没有收到响应\n            console.log('请求已发送但无响应');\n          } else {\n            // 在设置请求时发生了错误\n            console.log('请求配置错误:', error.message);\n          }\n          \n          // 显示错误通知\n          this.$notify.error({\n            title: '数据加载失败',\n            message: '仪表盘数据加载失败，将使用默认数据'\n          });\n          \n          // 使用默认数据\n          this.useDefaultData();\n        });\n    },\n    useDefaultData() {\n      // 模拟数据(实际开发中应根据需求保留或删除)\n      this.stats = {\n        userCount: 245,\n        messageCount: 56,\n        productCount: 32,\n      }\n      this.announcements = [\n        { \n          title: '系统更新通知', \n          content: '系统将于2023-06-01进行版本更新，新增活动管理功能，请各位管理员注意。', \n          time: '2023-05-25 10:00:00' \n        },\n        { \n          title: '活动筹备通知', \n          content: '即将在7月份开展暑期动漫活动，请提前做好筹备工作。', \n          time: '2023-05-20 14:30:00' \n        }\n      ]\n      this.todos = [\n        { content: '审核新提交的活动申请', date: '2023-05-26', status: '未完成' },\n        { content: '回复用户留言', date: '2023-05-25', status: '已完成' },\n        { content: '更新网站首页轮播图', date: '2023-05-28', status: '未完成' }\n      ]\n    },\n    tableRowClassName({row}) {\n      if (row.status === '已完成') {\n        return 'success-row';\n      } else {\n        return 'warning-row';\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.dashboard-container {\n  padding: 20px 20px 20px 40px; /* 增加左侧内边距 */\n  margin: 0 0 0 200px; /* 添加左侧外边距，避开侧边栏 */\n  \n  .data-cards-row {\n    display: flex;\n    justify-content: center;\n    flex-wrap: wrap;\n  }\n\n  .card-header {\n    display: flex;\n    align-items: center;\n    font-weight: bold;\n    font-size: 16px;\n  }\n\n  .data-card {\n    height: 160px;\n    position: relative;\n    overflow: hidden;\n    transition: all 0.3s;\n    border-radius: 8px;\n    border: none;\n    \n    &:hover {\n      transform: translateY(-5px);\n      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);\n    }\n\n    .card-content {\n      position: relative;\n      height: 100px;\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n    }\n    \n    .card-panel-num {\n      font-size: 28px;\n      font-weight: bold;\n      margin-top: 10px;\n      z-index: 2;\n      position: relative;\n    }\n    \n    .card-panel-icon {\n      position: absolute;\n      right: 15px;\n      bottom: 10px;\n      font-size: 45px;\n      opacity: 0.2;\n      z-index: 1;\n    }\n\n    &.activity-card {\n      background: linear-gradient(to right, #f46b45, #eea849);\n      color: white;\n      \n      .el-card__header {\n        background-color: rgba(255, 255, 255, 0.1);\n        color: white;\n        border-bottom: 1px solid rgba(255, 255, 255, 0.2);\n      }\n    }\n\n    &.user-card {\n      background: linear-gradient(to right, #36d1dc, #5b86e5);\n      color: white;\n      \n      .el-card__header {\n        background-color: rgba(255, 255, 255, 0.1);\n        color: white;\n        border-bottom: 1px solid rgba(255, 255, 255, 0.2);\n      }\n    }\n    \n    &.message-card {\n      background: linear-gradient(to right, #ff5f6d, #ffc371);\n      color: white;\n      \n      .el-card__header {\n        background-color: rgba(255, 255, 255, 0.1);\n        color: white;\n        border-bottom: 1px solid rgba(255, 255, 255, 0.2);\n      }\n    }\n    \n    &.product-card {\n      background: linear-gradient(to right, #11998e, #38ef7d);\n      color: white;\n      \n      .el-card__header {\n        background-color: rgba(255, 255, 255, 0.1);\n        color: white;\n        border-bottom: 1px solid rgba(255, 255, 255, 0.2);\n      }\n    }\n    \n    &.role-card {\n      background: linear-gradient(to right, #834d9b, #d04ed6);\n      color: white;\n      \n      .el-card__header {\n        background-color: rgba(255, 255, 255, 0.1);\n        color: white;\n        border-bottom: 1px solid rgba(255, 255, 255, 0.2);\n      }\n    }\n  }\n  \n  .info-card {\n    margin-bottom: 20px;\n    \n    .empty-data {\n      text-align: center;\n      color: #909399;\n      padding: 30px 0;\n      font-size: 14px;\n    }\n    \n    .announcement-card {\n      margin-bottom: 10px;\n      \n      .announcement-title {\n        margin: 0 0 10px;\n        font-size: 16px;\n      }\n      \n      .announcement-content {\n        margin: 0;\n        color: #606266;\n        font-size: 14px;\n      }\n    }\n  }\n  \n  .notice-timeline {\n    padding-top: 10px;\n  }\n  \n  .warning-row {\n    background-color: rgba(255, 236, 204, 0.3);\n  }\n  \n  .success-row {\n    background-color: rgba(227, 255, 233, 0.3);\n  }\n}\n</style> "]}]}